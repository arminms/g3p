---
title: The Basics
subtitle: C and C++ conventions
subject: g3p Quickstart Tutorial
description: Basic steps and concepts to work with G3P.
kernelspec:
  name: xcpp17
  display_name: C++17
---

# The Basics

---

(header_file)=
## The header file

The whole G3P library implemented as a single header file that you have to include it once in your <wiki:C++> code:

```{code-cell} cpp

#include <g3p/gnuplot>
```

:::::{seealso} `cling` include paths
:class: dropdown

If G3P is not installed in a standard folder for headers, you can add it to the [cling include paths](xref:cling#chapters/grammar) using one of the following methods:

::::{tab-set}
:::{tab-item} #pragma

```cpp
#pragma cling add_include_path("g3p/include/path")
```
:::

:::{tab-item} .(command)
In a `cling` REPL, but not Jupyter Notebook you can use `.I`:
```cpp
.I "g3p/include/path"
```

:::

::::

:::::

(gp_instance)=
## `gnuplot` instance

Now you can start with a [`gnuplot`](./api_ref.md#class_gnuplot) instance that is defined in [`g3p`](./api_ref.md#namespace_g3p) namespace. We name our instance `gp`:

```{code-cell} cpp

g3p::gnuplot gp;
```
+++
```{code-cell} cpp
:tags: [remove-cell]

gp ( "set border 31 linecolor '#555555'" )
   ( "set key textcolor '#555555' box lc '#555555'" )
   ( "set title tc '#555555'" );
```

:::::{aside}

::::{seealso} Start learning Gnuplot 📚
:class: dropdown
:open:

Here are some good resources to start with:
- [Gnuplot on-line documentation](http://gnuplot.info/docs_6.0/gnuplot6.html)
- [Zipped Jupyter notebooks](https://alogus.com/g5script/servefile/JupyterVersions.zip/dl/) from [Gnuplot 5 book](https://alogus.com/g5script/gnuplot5/) by Lee Phillips
- [Gnuplotting](https://gnuplotting.org/) by Hagen Wierstorf
::::
:::::

(conventions)=
## C and C++ conventions

There are two ways to send string literals (e.g. <wiki:Gnuplot> commands)  and variables to a [`g3p`](./api_ref.md#namespace_g3p)`::`[`gnuplot`](./api_ref.md#class_gnuplot) instance: `C` and `C++` conventions. You can even [mix and match](02_embedding_plot_data.md#datablock_plot) them.

[`Gnuplot`](http://www.gnuplot.info) comes with lots of demos that you can find them [here](http://gnuplot.info/demos). For our first plot we use almost a verbatim copy of the [Simple Plots](https://gnuplot.sourceforge.net/demo_5.4/simple.html) demo. Here are the G3P versions using both conventions along with the original <wiki:Gnuplot> version for the sake of comparisons:

::::{tab-set}
:label: conventions_tab
:::{tab-item} C convention

```{code-cell} cpp
:label: c_convention

int count = 200;
gp ( "set title 'Simple Plots ( %d points )' font ',20'", count )
   ( "set key left box" )
   ( "set samples %d", count)
   ( "set style data points" )
   ( "plot [-10:10] sin(x), atan(x),cos(atan(x))" ) // <-- no semicolon
```
:::

:::{tab-item} C++ convention

```{code-cell} cpp
:label: cpp_convention

int count = 200;
gp << "set title 'Simple Plots (" << count << " points )' font ',20'\n"
   << "set key left box\n"
   << "set samples" << count << "\n"
   << "set style data points\n"
   << "plot [-10:10] sin(x), atan(x),cos(atan(x))\n" // <-- no semicolon
```

:::

:::{tab-item} gnuplot

```{code-cell} Gnuplot
:label: gnuplot_code_snippet
:tags: [skip-execution]

set title "Simple Plots ( 200 Points )" font ",20"
set key left box
set samples 200
set style data points

plot [-10:10] sin(x),atan(x),cos(atan(x))
```
![](#c_convention)
:::

::::

::::{important} Displaying the plot in Jupyter 🪐
:label: display-the-plot

To display a plot generated by [`g3p`](./api_ref.md#namespace_g3p)`::`[`gnuplot`](./api_ref.md#class_gnuplot) instance in a [Jupyter Notebook](wiki:Project_Jupyter) you need to have the instance without a semicolon as the last element of a code cell. That's why the previous examples are not ended up with a semicolon. So, to replot the previous one, you can type the name of the [`g3p`](./api_ref.md#namespace_g3p)`::`[`gnuplot`](./api_ref.md#class_gnuplot) instance without semicolon and then {kbd}`Shift`+{kbd}`Enter`:

```{code-cell} cpp
:tags: [hide-output]

gp
```

Another way to achieve this is the `xcpp::display()` function. A subtle distinction between using `xcpp::display()` and omitting the last semicolon is that the latter results in a cell output including a prompt number in a Jupyter notebook, while the former only shows the plot. This behavior is consistent with the Python kernel implementation:

```{code-cell} cpp
:tags: [hide-output]

g3p::display(gp);
```

Yet another way to explicitly display a plot is [`g3p`](./api_ref.md#namespace_g3p)`::`[`display`](./api_ref.md#display_func)`()` function. This one has an optional 2{sup}`nd` argument that can be used to [show an animated plot](./03_animating_plots.md#g3p_display).
::::

(newline)=
## Newline

As you may noticed in the above examples, one important difference between `C++` and `C` *conventions* is that a newline character will be added automatically at the end of a string literal for the latter. In G3P, there are various ways to send a newline to a [`g3p`](./api_ref.md#namespace_g3p)`::`[`gnuplot`](./api_ref.md#class_gnuplot) instance:

- **Implicit**
  - String literal in parenthesis (i.e. overloaded function operator): `gp("...")`
- **Explicit**
  - String literal: `gp` [`<<`](./api_ref.md#gnuplot_in_operator) `"\n"`
  - End-of-line member function: `gp.`[`endl`](./api_ref.md#gnuplot_endl)`()`
  - End-of-line manipulator: `gp` [`<<`](./api_ref.md#gnuplot_in_operator) [`g3p`](./api_ref.md#namespace_g3p)`::`[`endl`](./api_ref.md#endl_manipulator)

::::{danger} Don't use single quotes 🚫

Unlike <wiki:C++> streams, single quotes are not valid for sending characters and you should use double quotes. So, `gp` [`<<`](./api_ref.md#gnuplot_in_operator) `'\n'` results in an error:

```{code-cell} cpp
:label: single_quotes
:tags: [hide-output, raises-exception]

gp << '\n'
```

::::

::::{seealso}

Like [`std::endl`](https://en.cppreference.com/w/cpp/io/manip/endl) manipulator for <wiki:C++> streams, [`g3p`](./api_ref.md#namespace_g3p)`::`[`endl`](./api_ref.md#endl_manipulator) inserts a newline character and also flushes it by calling [`g3p`](./api_ref.md#namespace_g3p)`::`[`flush`](./api_ref.md#gnuplot_flush)`()`, which doesn't happen for other methods. See [](#flush) section for more information.
::::

Let's try all of the above methods in the same order for our next plot:

```{code-cell} cpp
:label: newline_plot

count = 100;
gp (  "set title 'Simple Plots ( %d points )", count ); // implicit
gp << "set key right nobox" << "\n";                    // explicit - string literal
gp <<  "set samples" << count;
gp.endl();                                              // explicit - member function
gp << "plot [-pi/2:pi] cos(x),-(sin(x) > sin(x+1) ? sin(x) : sin(x+1))"
   << g3p::endl                                         // explicit - manipulator
```

(flush)=
## Flush

G3P uses *buffered i/o* to communicate with [`g3p`](./api_ref.md#namespace_g3p)`::`[`gnuplot`](./api_ref.md#class_gnuplot) instances. That means the plotting commands you use in your `C/C++` code are not necessarily received by the [`g3p`](./api_ref.md#namespace_g3p)`::`[`gnuplot`](./api_ref.md#class_gnuplot) instance at any moment unless you ensure the buffer is flushed. That's particularly important after executing [`plot`](http://gnuplot.info/docs_5.5/loc7782.html), [`splot`](http://gnuplot.info/docs_5.5/loc17814.html) or [`replot`](http://gnuplot.info/docs_5.5/loc9853.html) commands to ensure the plot is displayed. Like [newline](#newline), there are various ways in G3P to flush the buffers:

- **Implicit** (available only in [Jupyter Notebooks](wiki:Project_Jupyter))
  - Omitting semicolon from a [`g3p`](./api_ref.md#namespace_g3p)`::`[`gnuplot`](./api_ref.md#class_gnuplot) instance as the last element of a cell or using `xcpp::display()`/ [`g3p`](./api_ref.md#namespace_g3p)`::`[`display`](./api_ref.md#display_func)`()`
- **Explicit**
  - End-of-line member function: `gp.`[`endl`](./api_ref.md#gnuplot_endl)`()`
  - Flush member function: `gp.`[`flush`](./api_ref.md#gnuplot_flush)`()`
  - Log member function: `gp.`[`log`](./api_ref.md#gnuplot_log)`()`
  - Flush manipulator: `gp` [`<<`](./api_ref.md#gnuplot_in_operator) [`g3p`](./api_ref.md#namespace_g3p)`::`[`flush`](./api_ref.md#gnuplot_flush)`()`
